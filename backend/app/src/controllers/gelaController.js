import dbConnection from '../database/database.js';


export const getGelak = async (req, res) => {
    try {
        const gelak = await dbConnection.query('SELECT * FROM gela');
        res.status(200).json(gelak);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
};


export const getGela = async (req, res) => {
    try {
        const gela = await dbConnection.query('SELECT * FROM gela WHERE idGela = ?', [req.params.idGela]);
        res.status(200).json(gela);
    } catch (error) {
        res.status(500).json({ message: 'Error in getGela' });
    }
};


export const getKoordenatuak = async (req, res) => {
    try {
        const koordenatuak = await dbConnection.query('SELECT x,y FROM gela');
        res.status(200).json(koordenatuak);
    } catch (error) {
        res.status(500).json({ message: 'Error in getKoordenatuak' });
    }
};
export const createNewGela = async (req, res) => {
    try {
        const { kodea, x, y, solairua, eraikina, mota } = req.body;
        const query = 'INSERT INTO gela (kodea, x, y, solairua, eraikina, mota) VALUES (?, ?, ?, ?, ?, ?)';
        await dbConnection.query(query, [kodea, x, y, solairua, eraikina, mota]);
        res.status(201).json({ message: 'Gela created successfully' });
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
};

export const getWalkableSpots = async (req,res)=>{

try{
    res.status(200).json({mapa: formatData(dataString)});
}
catch(error){
    res.status(500).json({error: error.message});
};
};









export function formatData(dataString) {
    const dataArray = dataString.split("\n"); // Dividir cada fila por un salto de línea
    const formattedData = dataArray.map(row => 
        row.split('').map(Number) // Convertir cada fila en un array de números
    );
   // console.log(formattedData);
    return formattedData;
}

const dataString =
`111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100000011111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
111110000111111111110000111111111100001111111111001111111110000111111111000011111100001111111000011111111100001111111110000111111111000011111111111110000111111
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
100000000001100000111111111111111111110001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111000111111111111111
111111111111111100111111111111111111111001111111111111111111111111111111111111111111111111111111111111111111111111111000111111111111111111111001111111111111111
100000000001000000000010000000000010000000000100000000001111111111111111111111111111111111111111111111100000000001000000000010000000000110000000000100000000001
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
110011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
110011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
000011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
110011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
110011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
110011100110011100111001100111001100111100111001111110011111111001111111111001111111101111111110011111111111111001111111011110011100110011100111011110011100111
110011100110011100111001100011001100011100111000111110011111111001111111111000001111101111111110011111111111111001111110011110011100110011100111011110011100111
110011100110011100111001100111001100111100111001111110011111111001111111111000001111101111111110011111111111111001111111011110011100110011100111011110011100111
111011101110011101111001110111001110111101111100111110011111111011111111111100001111101111111110111111111111111011111110111110111101111011101111011110111110111
111011111111011111111101111111001111111100111111111110011111111111111111111101111111111111111111111111111111111111111111111111111101111111101111111110111111111
111011111111011111111101111111001111111100111111111110011111111111111111111101111111111111111111111111111111111111111111111111111101111111101111111110111111111
111011111111011111111101111111001111111100111111111110011111111111111111111101111111111111111111111111111111111111111111111111111101111111101111111110111111111
111111111111111111111111111111001111111111111111111111111111111111111111111101111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111`;


